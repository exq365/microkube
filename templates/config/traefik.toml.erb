logLevel = "INFO"
defaultEntryPoints = [<%= '"https",' if @config['ssl']['enabled'] %>"http"]

[api]

[entryPoints]
  [entryPoints.http]
  address = ":80"
<% if @config['ssl']['enabled'] -%>
  [entryPoints.https]
  address = ":443"
  [entryPoints.https.tls]
<% end -%>

[retry]

[docker]
endpoint = "unix:///var/run/docker.sock"
domain = "local"
watch = true
exposedbydefault = false

<% if @config['ssl']['enabled'] -%>
[acme]
email = "<%= @config['ssl']['email'] %>"
storage = "acme.json"
entryPoint = "https"
OnHostRule = true
usebindportip = true

[acme.httpChallenge]
entryPoint = "http"
<% end -%>

[file]

[backends]
  [backends.backend1]
    [backends.backend1.servers.server1]
    url = "http://www.exq365.com"

[frontends]
  [frontends.frontend1]
  backend = "backend1"
    [frontends.frontend1.routes.test_1]
    rule = "PathPrefix:/;Host:www.app.local"